{"version":3,"file":"4.99c078cbae82d9e0f630.hot-update.js","sources":["webpack:///components/Three.jsx","webpack:///utils/threeRising/GeneralLights.js","webpack:///utils/threeRising/SceneManager.js","webpack:///utils/threeRising/SceneSubject.js","webpack:///utils/threeRising/threeEntryPoint.js"],"sourcesContent":["import React, { Component } from 'react';\nimport threeFooter from \"../utils/threeFooter/threeEntryPoint\"\nimport threeRising from \"../utils/threeRising/threeEntryPoint\"\n\nclass Three extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {}\n  }\n  componentDidMount() {\n    if( !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {\n      switch (objName) {\n        case 'cube_rising':\n          threeRising(this.threeRootElement, this.props.objName);\n          break;\n        case 'cube_footer':\n          threeFooter(this.threeRootElement, this.props.objName);\n          break;\n      }\n    }\n  }\n  render () {\n    return (\n      <div className=\"three-container\" id={this.props.objName} ref={element => this.threeRootElement = element} />\n    )\n  }\n}\n\nexport default Three\n\n\n// WEBPACK FOOTER //\n// components/Three.jsx","import * as THREE from 'three-full';\n\nexport default scene => {\n\n  const ambientLight = new THREE.AmbientLight(0xFFFFFF, 1);\n  const lightOut = new THREE.PointLight(\"#FFFFFF\", 1);\n  ambientLight.position.set(100,100,100);\n  lightOut.position.set(100,100,100);\n\n  scene.add(ambientLight);\n  // scene.add(lightOut);\n\n  const rad = 80;\n\n  function update(time) {\n    // const x = rad * Math.sin(time * 0.2);\n    // ambientLight.position.x = x;\n  }\n\n  return {\n    update\n  };\n}\n\n\n// WEBPACK FOOTER //\n// utils/threeRising/GeneralLights.js","import * as THREE from 'three-full';\nimport SceneSubject from './SceneSubject';\nimport GeneralLights from './GeneralLights';\n\nexport default canvas => {\n\n  const clock = new THREE.Clock();\n  const deg = Math.PI / 180;\n  const origin = new THREE.Vector3(0, 0, 0);\n\n  const screenDimensions = {\n    width: canvas.width,\n    height: canvas.height\n  };\n\n  const scene = buildScene();\n  const renderer = buildRender(screenDimensions);\n  const camera = buildCamera(screenDimensions);\n  const sceneSubjects = createSceneSubjects(scene);\n\n  function buildScene() {\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color('#191715');\n\n    return scene;\n  }\n\n  function buildRender({width, height}) {\n    const renderer = new THREE.WebGLRenderer({canvas: canvas, antialias: true, alpha: false});\n    const DPR = window.devicePixelRatio ? window.devicePixelRatio : 1;\n    renderer.setPixelRatio(DPR);\n    renderer.setSize(width, height);\n    renderer.setClearColor(0x191715);\n\n    // renderer.gammaInput = false;\n    // renderer.gammaOutput = false;\n\n    return renderer;\n  }\n\n  function buildCamera({width, height}) {\n    const aspectRatio = width / height;\n    const fieldOfView = 4; //5\n    const nearPlane = 4;\n    const farPlane = 100;\n    const camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane);\n\n    camera.position.z = 11;\n\n    window.camera = camera;\n    camera.lookAt(0, 0.1, 0);\n\n    return camera;\n  }\n\n  function createSceneSubjects(scene) {\n    const sceneSubjects = [\n      new GeneralLights(scene),\n      new SceneSubject(scene)\n    ];\n\n    return sceneSubjects;\n  }\n\n  function update() {\n    const elapsedTime = clock.getElapsedTime();\n\n    for (let i = 0; i < sceneSubjects.length; i++)\n      sceneSubjects[i].update(elapsedTime);\n\n    renderer.render(scene, camera);\n  }\n\n  function onWindowResize() {\n    const {width, height} = canvas;\n\n    screenDimensions.width = width;\n    screenDimensions.height = height;\n\n    camera.aspect = width / height;\n    camera.updateProjectionMatrix();\n\n    renderer.setSize(width, height);\n  }\n\n  return {\n    update,\n    onWindowResize\n  };\n}\n\n\n// WEBPACK FOOTER //\n// utils/threeRising/SceneManager.js","import * as THREE from 'three-full';\nimport { TimelineMax } from 'gsap';\n\nexport default scene => {\n  const deg = Math.PI/180;\n  const pivot = new THREE.Object3D();\n  const cubeBackMaterials = [\n    new THREE.LineBasicMaterial({color: 0x302e2f}), // left\n    new THREE.LineBasicMaterial({color: 0x363234}),\n    new THREE.LineBasicMaterial({color: 0x191715}), // top\n    new THREE.LineBasicMaterial({color: 0x191715}),\n    new THREE.LineBasicMaterial({color: 0x231f20}),\n    new THREE.LineBasicMaterial({color: 0x231f20}), // right\n  ];\n\n  const cubeGeometry = new THREE.BoxGeometry(3.999, 3.999, 3.999);\n  const cubeBack = new THREE.Mesh(cubeGeometry, cubeBackMaterials);\n        cubeBack.position.set(-1, -1, 1);\n\n  // cubeBack.rotation.set(36*deg, 45*deg, 0);\n  const cubeGroup = new THREE.Group();\n        cubeGroup.rotation.set(36*deg, 225.05*deg, 0);\n\n  //======ANIMATIONS=====//\n  const cubeRisingAnim = new TimelineMax();\n        cubeRisingAnim.from(pivot.rotation, 1, { z:(40 * deg), x: (-10 * deg) }).pause();\n        cubeRisingAnim.from(cubeGroup.rotation, 1, { y:(245 * deg) }, '-=1').pause();\n        cubeRisingAnim.from(cubeGroup.position, 1, { y: 0.5, z: -5 }, '-=1').pause();\n        window.cubeRisingAnim = cubeRisingAnim;\n  //======ANIMATIONS=====//\n\n\n  //===== GLOBAL ==== ///\n  // window.cubeGroup = cubeGroup;\n  // window.cubeBack = cubeBack;\n  // window.pivot = pivot;\n  //===== GLOBAL ==== ///\n\n  const loaderObj = new THREE.OBJLoader();\n  const loaderMtl = new THREE.MTLLoader();\n\n\n  const getCube = (modelName) => {\n    return new Promise((resolve) => {\n      loaderMtl.load('/static/obj/cube_rising.mtl', materials => {\n\n        materials.preload();\n        loaderObj.setMaterials(materials);\n        loaderObj.load('/static/obj/cube_rising.obj', (obj) => {\n\n          obj.traverse(function (child) {\n            if (child instanceof THREE.Mesh) {\n              child.material.forEach((item) => {\n                item.color.set(0xFFFFFF);\n              })\n            }\n          })\n\n          resolve(obj)\n        })\n      })\n    })\n  };\n\n\n  const addObjectToScene = (objArr) => {\n    cubeGroup.add(cubeBack);\n    objArr.forEach(item => {\n      cubeGroup.add(item);\n    });\n\n    pivot.position.set(0, -0.1, 0);\n    pivot.add( cubeGroup );\n    scene.add( pivot );\n  };\n\n\n  const whenTheAllModelsLoaded = () => {\n    console.log('uploaded');\n    scene.background = new THREE.Color('#231f20');\n  };\n\n  Promise.all([\n\n    getCube().then(obj => { // Do something after Player model loaded;\n      console.log(obj);\n      obj.traverse(function (child) {\n        if (child instanceof THREE.Mesh) {\n          child.material.forEach((item) => {\n            item.transparent = true;\n          })\n        }\n      });\n\n      addObjectToScene([obj]);\n    })\n\n  ]).then(whenTheAllModelsLoaded);\n\n\n  const speed = 0.001;\n  function update(time) {\n    // if( cubeGroup ) {\n    //   cubeGroup.rotation.y += time * speed;\n    //   cubeGroup.rotation.z += time * speed;\n    // }\n  }\n\n  return {\n    update,\n    cubeGroup,\n    pivot\n  };\n}\n\n\n// WEBPACK FOOTER //\n// utils/threeRising/SceneSubject.js","import SceneManager from './SceneManager';\nimport { TimelineMax, Linear } from 'gsap';\n\nexport default (container, objName ) => {\n  const canvas = createCanvas(document, container);\n  const sceneManager = new SceneManager(canvas, objName);\n  const freeze = true;\n  const deg = Math.PI / 180;\n  let canvasHalfWidth;\n  let canvasHalfHeight;\n  let canvasOffsetTop;\n\n  bindEventListeners();\n  render();\n  setTimeout(()=>{\n    sceneManager.update();\n  }, 3000);\n  sceneManager.update();\n\n  function createCanvas(document, container) {\n    const canvas = document.createElement('canvas');\n    container.appendChild(canvas);\n    getCanvasPosition(canvas);\n    return canvas;\n  }\n\n  function bindEventListeners() {\n    window.onresize = resizeCanvas;\n    window.onscroll = scrollCanvas;\n\n    resizeCanvas();\n  }\n\n  function resizeCanvas() {\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n\n    canvas.width = canvas.offsetWidth;\n    canvas.height = canvas.offsetHeight;\n\n    canvasHalfWidth = Math.round(canvas.offsetWidth / 2);\n    canvasHalfHeight = Math.round(canvas.offsetHeight / 2);\n\n    sceneManager.onWindowResize();\n  }\n\n\n  function getCanvasPosition() {\n    let element = document.getElementsByTagName('canvas')[1];\n    console.log(document.getElementsByTagName('canvas').parentNode);\n    // console.log(document.getElementsByTagName('canvas'));\n    let yPosition = 0;\n    while(element) {\n      yPosition += (element.offsetTop - element.scrollTop + element.clientTop);\n      element = element.offsetParent;\n    }\n    canvasOffsetTop = yPosition;\n  }\n\n\n  function scrollCanvas() {\n    const delt = canvasOffsetTop - window.scrollY + 150;\n\n    if (delt < (canvas.offsetHeight)) {\n      const r = ((delt * 100) / canvas.offsetHeight) / 100;\n      // window.cubeRisingAnim.progress(1-r);\n      // window.cubeFooterAnim.progress(1-r);\n      switch (objName) {\n        case 'cube_rising':\n          console.log('rising:', r);\n          break;\n        case 'cube_footer':\n          console.log('footer:', r);\n          break;\n      }\n    }\n\n    sceneManager.update();\n  }\n\n  function render(time) {\n    requestAnimationFrame(render);\n    !freeze ? sceneManager.update() : false;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// utils/threeRising/threeEntryPoint.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAGA;AACA;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AANA;AAQA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;AArBA;AACA;AAuBA;AAAA;;;;;;;;;;;;AAxBA;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AArBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAtFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAKA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AA/GA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AANA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlFA;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}